<!DOCTYPE html>  <html> <head>   <title>dialog.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               dialog.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>The <code>$dialogProvider</code> can be used to configure global defaults for your
<code>$dialog</code> service.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">dialogModule</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;ui.bootstrap.dialog&#39;</span><span class="p">,</span> <span class="p">[]);</span>

<span class="nx">dialogModule</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;MessageBoxController&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;$scope&#39;</span><span class="p">,</span> <span class="s1">&#39;dialog&#39;</span><span class="p">,</span> <span class="s1">&#39;model&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">,</span> <span class="nx">dialog</span><span class="p">,</span> <span class="nx">model</span><span class="p">){</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="nx">model</span><span class="p">.</span><span class="nx">title</span><span class="p">;</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">message</span> <span class="o">=</span> <span class="nx">model</span><span class="p">.</span><span class="nx">message</span><span class="p">;</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">buttons</span> <span class="o">=</span> <span class="nx">model</span><span class="p">.</span><span class="nx">buttons</span><span class="p">;</span>
  <span class="nx">$scope</span><span class="p">.</span><span class="nx">close</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">){</span>
    <span class="nx">dialog</span><span class="p">.</span><span class="nx">close</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
  <span class="p">};</span>
<span class="p">}]);</span>

<span class="nx">dialogModule</span><span class="p">.</span><span class="nx">provider</span><span class="p">(</span><span class="s2">&quot;$dialog&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>The default options for all dialogs.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">defaults</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">backdrop</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">modalClass</span><span class="o">:</span> <span class="s1">&#39;modal&#39;</span><span class="p">,</span>
    <span class="nx">backdropClass</span><span class="o">:</span> <span class="s1">&#39;modal-backdrop&#39;</span><span class="p">,</span>
    <span class="nx">transitionClass</span><span class="o">:</span> <span class="s1">&#39;fade&#39;</span><span class="p">,</span>
    <span class="nx">triggerClass</span><span class="o">:</span> <span class="s1">&#39;in&#39;</span><span class="p">,</span>
    <span class="nx">resolve</span><span class="o">:</span><span class="p">{},</span>
    <span class="nx">backdropFade</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">modalFade</span><span class="o">:</span><span class="kc">false</span><span class="p">,</span>
    <span class="nx">keyboard</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span> <span class="c1">// close with esc key</span>
    <span class="nx">backdropClick</span><span class="o">:</span> <span class="kc">true</span> <span class="c1">// only in conjunction with backdrop=true</span>
    <span class="cm">/* other options: template, templateUrl, controller */</span>
  <span class="p">};</span>

  <span class="kd">var</span> <span class="nx">globalOptions</span> <span class="o">=</span> <span class="p">{};</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>The <code>options({})</code> allows global configuration of all dialogs in the application.</p>

<pre><code> var app = angular.module('App', ['ui.bootstrap.dialog'], function($dialogProvider){
   // don't close dialog when backdrop is clicked by default
   $dialogProvider.options({backdropClick: false});
 });
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">){</span>
    <span class="nx">globalOptions</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
  <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Returns the actual <code>$dialog</code> service that is injected in controllers</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">this</span><span class="p">.</span><span class="nx">$get</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;$http&quot;</span><span class="p">,</span> <span class="s2">&quot;$document&quot;</span><span class="p">,</span> <span class="s2">&quot;$compile&quot;</span><span class="p">,</span> <span class="s2">&quot;$rootScope&quot;</span><span class="p">,</span> <span class="s2">&quot;$controller&quot;</span><span class="p">,</span> <span class="s2">&quot;$templateCache&quot;</span><span class="p">,</span> <span class="s2">&quot;$q&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">$http</span><span class="p">,</span> <span class="nx">$document</span><span class="p">,</span> <span class="nx">$compile</span><span class="p">,</span> <span class="nx">$rootScope</span><span class="p">,</span> <span class="nx">$controller</span><span class="p">,</span> <span class="nx">$templateCache</span><span class="p">,</span> <span class="nx">$q</span><span class="p">)</span> <span class="p">{</span>

    <span class="kd">var</span> <span class="nx">body</span> <span class="o">=</span> <span class="nx">$document</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">);</span>

    <span class="kd">function</span> <span class="nx">createElement</span><span class="p">(</span><span class="nx">clazz</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">el</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">element</span><span class="p">(</span><span class="s2">&quot;&lt;div&gt;&quot;</span><span class="p">);</span>
      <span class="nx">el</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">clazz</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">el</span><span class="p">;</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>The <code>Dialog</code> class represents a modal dialog. The dialog class can be invoked by providing an options object
containing at lest template or templateUrl and controller:</p>

<pre><code>var d = new Dialog({templateUrl: 'foo.html', controller: 'BarController'});
</code></pre>

<p>Dialogs can also be created using templateUrl and controller as distinct arguments:</p>

<pre><code>var d = new Dialog('path/to/dialog.html', MyDialogController);
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="kd">function</span> <span class="nx">Dialog</span><span class="p">(</span><span class="nx">opts</span><span class="p">)</span> <span class="p">{</span>

      <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span> <span class="nx">options</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">defaults</span><span class="p">,</span> <span class="nx">globalOptions</span><span class="p">,</span> <span class="nx">opts</span><span class="p">);</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">backdropEl</span> <span class="o">=</span> <span class="nx">createElement</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">backdropClass</span><span class="p">);</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">backdropFade</span><span class="p">){</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">backdropEl</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">transitionClass</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">backdropEl</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">triggerClass</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">modalEl</span> <span class="o">=</span> <span class="nx">createElement</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">modalClass</span><span class="p">);</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">modalFade</span><span class="p">){</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">modalEl</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">transitionClass</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">modalEl</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">triggerClass</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">handledEscapeKey</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">which</span> <span class="o">===</span> <span class="mi">27</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
          <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">$apply</span><span class="p">();</span>
        <span class="p">}</span>
      <span class="p">};</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">handleBackDropClick</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">$apply</span><span class="p">();</span>
      <span class="p">};</span>
    <span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>The <code>isOpen()</code> method returns wether the dialog is currently visible.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">Dialog</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">isOpen</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_open</span><span class="p">;</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>The <code>open(templateUrl, controller)</code> method opens the dialog.
Use the <code>templateUrl</code> and <code>controller</code> arguments if specifying them at dialog creation time is not desired.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">Dialog</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">open</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">templateUrl</span><span class="p">,</span> <span class="nx">controller</span><span class="p">){</span>
      <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span> <span class="nx">options</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">;</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">templateUrl</span><span class="p">){</span>
        <span class="nx">options</span><span class="p">.</span><span class="nx">templateUrl</span> <span class="o">=</span> <span class="nx">templateUrl</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span><span class="p">(</span><span class="nx">controller</span><span class="p">){</span>
        <span class="nx">options</span><span class="p">.</span><span class="nx">controller</span> <span class="o">=</span> <span class="nx">controller</span><span class="p">;</span>
      <span class="p">}</span>
      
      <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">template</span> <span class="o">||</span> <span class="nx">options</span><span class="p">.</span><span class="nx">templateUrl</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;Dialog.open expected template or templateUrl, neither found. Use options or open method to specify them.&#39;</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">_loadResolves</span><span class="p">().</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">locals</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">$scope</span> <span class="o">=</span> <span class="nx">locals</span><span class="p">.</span><span class="nx">$scope</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">$scope</span> <span class="o">=</span> <span class="nx">$rootScope</span><span class="p">.</span><span class="nx">$new</span><span class="p">();</span>

        <span class="nx">self</span><span class="p">.</span><span class="nx">modalEl</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">locals</span><span class="p">.</span><span class="nx">$template</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">controller</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">ctrl</span> <span class="o">=</span> <span class="nx">$controller</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">controller</span><span class="p">,</span> <span class="nx">locals</span><span class="p">);</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">modalEl</span><span class="p">.</span><span class="nx">contents</span><span class="p">().</span><span class="nx">data</span><span class="p">(</span><span class="s1">&#39;ngControllerController&#39;</span><span class="p">,</span> <span class="nx">ctrl</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="nx">$compile</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">modalEl</span><span class="p">.</span><span class="nx">contents</span><span class="p">())(</span><span class="nx">$scope</span><span class="p">);</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">_addElementsToDom</span><span class="p">();</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>trigger tranisitions</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">modalFade</span><span class="p">){</span> <span class="nx">self</span><span class="p">.</span><span class="nx">modalEl</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">triggerClass</span><span class="p">);</span> <span class="p">}</span>
          <span class="k">if</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">backdropFade</span><span class="p">){</span> <span class="nx">self</span><span class="p">.</span><span class="nx">backdropEl</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">triggerClass</span><span class="p">);</span> <span class="p">}</span>
        <span class="p">});</span>

        <span class="nx">self</span><span class="p">.</span><span class="nx">_bindEvents</span><span class="p">();</span>
      <span class="p">});</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">deferred</span> <span class="o">=</span> <span class="nx">$q</span><span class="p">.</span><span class="nx">defer</span><span class="p">();</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">deferred</span><span class="p">.</span><span class="nx">promise</span><span class="p">;</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>closes the dialog and resolves the promise returned by the <code>open</code> method with the specified result.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">Dialog</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">close</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">){</span>
      <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">fadingEl</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getFirstFadingElement</span><span class="p">();</span>

      <span class="kd">function</span> <span class="nx">transitionHandler</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">modalEl</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="nx">angularUI</span><span class="p">.</span><span class="nx">getTransitionEndEventName</span><span class="p">(),</span> <span class="nx">transitionHandler</span><span class="p">);</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">_onCloseComplete</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
      <span class="p">}</span>

      <span class="k">if</span><span class="p">(</span><span class="nx">fadingEl</span><span class="p">){</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">modalEl</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nx">angularUI</span><span class="p">.</span><span class="nx">getTransitionEndEventName</span><span class="p">(),</span> <span class="nx">transitionHandler</span><span class="p">);</span>
        
        <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">modalFade</span><span class="p">){</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">modalEl</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">triggerClass</span><span class="p">);</span>

          <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">backdropFade</span><span class="p">){</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">backdropEl</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">triggerClass</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">_onCloseComplete</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="nx">Dialog</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_getFirstFadingElement</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">modalFade</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">modalEl</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">backdropFade</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">backdropEl</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="nx">Dialog</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_fadingEnabled</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">modalFade</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">backdropFade</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="nx">Dialog</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_bindEvents</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">keyboard</span><span class="p">){</span> <span class="nx">body</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handledEscapeKey</span><span class="p">);</span> <span class="p">}</span>
      <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">backdrop</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">backdropClick</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">backdropEl</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleBackDropClick</span><span class="p">);</span> <span class="p">}</span>
    <span class="p">};</span>

    <span class="nx">Dialog</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_unbindEvents</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">keyboard</span><span class="p">){</span> <span class="nx">body</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="s1">&#39;keydown&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handledEscapeKey</span><span class="p">);</span> <span class="p">}</span>
      <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">backdrop</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">backdropClick</span><span class="p">){</span> <span class="k">this</span><span class="p">.</span><span class="nx">backdropEl</span><span class="p">.</span><span class="nx">unbind</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleBackDropClick</span><span class="p">);</span> <span class="p">}</span>
    <span class="p">};</span>

    <span class="nx">Dialog</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_onCloseComplete</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_removeElementsFromDom</span><span class="p">();</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_unbindEvents</span><span class="p">();</span>

      <span class="k">this</span><span class="p">.</span><span class="nx">deferred</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>

      <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_fadingEnabled</span><span class="p">()){</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">$scope</span><span class="p">.</span><span class="nx">$apply</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">};</span>

    <span class="nx">Dialog</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_addElementsToDom</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">body</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">modalEl</span><span class="p">);</span>
      <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">backdrop</span><span class="p">)</span> <span class="p">{</span> <span class="nx">body</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">backdropEl</span><span class="p">);</span> <span class="p">}</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_open</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="nx">Dialog</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_removeElementsFromDom</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">modalEl</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
      <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">backdrop</span><span class="p">)</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">backdropEl</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span> <span class="p">}</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_open</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Loads all <code>options.resolve</code> members to be used as locals for the controller associated with the dialog.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">Dialog</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_loadResolves</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="kd">var</span> <span class="nx">values</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">keys</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">template</span><span class="p">,</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

      <span class="k">if</span> <span class="p">(</span><span class="nx">template</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">template</span><span class="p">)</span> <span class="p">{</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">template</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">templateUrl</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">template</span> <span class="o">=</span> <span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">templateUrl</span><span class="p">,</span> <span class="p">{</span><span class="nx">cache</span><span class="o">:</span><span class="nx">$templateCache</span><span class="p">})</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span> <span class="p">});</span>
      <span class="p">}</span>

      <span class="nx">angular</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">resolve</span> <span class="o">||</span> <span class="p">[],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">keys</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
        <span class="nx">values</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
      <span class="p">});</span>

      <span class="nx">keys</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;$template&#39;</span><span class="p">);</span>
      <span class="nx">values</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">template</span><span class="p">);</span>

      <span class="k">return</span> <span class="nx">$q</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">values</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">values</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">locals</span> <span class="o">=</span> <span class="p">{};</span>
        <span class="nx">angular</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">values</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">locals</span><span class="p">[</span><span class="nx">keys</span><span class="p">[</span><span class="nx">index</span><span class="p">]]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
        <span class="p">});</span>
        <span class="nx">locals</span><span class="p">.</span><span class="nx">dialog</span> <span class="o">=</span> <span class="nx">self</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">locals</span><span class="p">;</span>
      <span class="p">});</span>
    <span class="p">};</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>The actual <code>$dialog</code> service that is injected in controllers.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">return</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Creates a new <code>Dialog</code> with the specified options.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">dialog</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">opts</span><span class="p">){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">Dialog</span><span class="p">(</span><span class="nx">opts</span><span class="p">);</span>
      <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>creates a new <code>Dialog</code> tied to the default message box template and controller.</p>

<p>Arguments <code>title</code> and <code>message</code> are rendered in the modal header and body sections respectively.
The <code>buttons</code> array holds an object with the following members for each button to include in the 
modal footer section:</p>

<ul>
<li><code>result</code>: the result to pass to the <code>close</code> method of the dialog when the button is clicked</li>
<li><code>label</code>: the label of the button</li>
<li><code>cssClass</code>: additional css class(es) to apply to the button for styling</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="nx">messageBox</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">title</span><span class="p">,</span> <span class="nx">message</span><span class="p">,</span> <span class="nx">buttons</span><span class="p">){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">Dialog</span><span class="p">({</span><span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;template/dialog/message.html&#39;</span><span class="p">,</span> <span class="nx">controller</span><span class="o">:</span> <span class="s1">&#39;MessageBoxController&#39;</span><span class="p">,</span> <span class="nx">resolve</span><span class="o">:</span> <span class="p">{</span><span class="nx">model</span><span class="o">:</span> <span class="p">{</span>
          <span class="nx">title</span><span class="o">:</span> <span class="nx">title</span><span class="p">,</span>
          <span class="nx">message</span><span class="o">:</span> <span class="nx">message</span><span class="p">,</span>
          <span class="nx">buttons</span><span class="o">:</span> <span class="nx">buttons</span>
        <span class="p">}}});</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}];</span>
<span class="p">});</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 